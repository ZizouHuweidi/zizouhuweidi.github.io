---
import AppLayout from "@layouts/AppLayout.astro";
import Header from "@components/Header.astro";
import openSourceContributions from "@data/contributions.json";
import ProjectCard from "@components/ProjectCard.astro";

let contributions = openSourceContributions.sort((a, b) => {
  if (a.role === "maintainer" && b.role !== "maintainer") {
    return -1;
  }
  if (a.role === "maintainer" && b.role === "maintainer") {
    return a.stars > b.stars ? -1 : 1;
  }
  if (a.role === "author" && b.role === "author") {
    return a.stars > b.stars ? -1 : 1;
  }
  if (a.role === "author" && b.role !== "author") {
    return -1;
  }
  return 0;
});
---

<AppLayout title="Projects">
  <Header title="My Projects" />
  <p class="max-w-prose mb-10 font-normal text-zinc-400 leading-relaxed">
    A concise list of some relevant projects I have authored, contributed to and
    or maintain
  </p>
  <ul class="grid grid-cols-1 gap-8">
    {
      contributions.map((project) => (
        <ProjectCard
          name={project.name}
          description={project.description}
          stars={project.stars}
          role={project.role}
          url={project.url}
          languages={project.languages}
        />
      ))
    }
  </ul>
</AppLayout>
